# FluxForge Production Configuration
# Environment: Production
# Last Updated: 2026-02-14

# Control Plane Configuration
CONTROL_PLANE_REPLICAS=3
CONTROL_PLANE_CPU_REQUEST=1000m
CONTROL_PLANE_CPU_LIMIT=2000m
CONTROL_PLANE_MEMORY_REQUEST=2Gi
CONTROL_PLANE_MEMORY_LIMIT=4Gi

# Database Configuration
DB_HOST=postgres-primary.internal
DB_PORT=5432
DB_NAME=fluxforge
DB_MAX_CONNECTIONS=100
DB_CONNECTION_TIMEOUT=10s
DB_STATEMENT_TIMEOUT=30s

# Scheduler Configuration
SCHEDULER_MAX_CONCURRENCY=100
SCHEDULER_QUEUE_MAX_DEPTH=10000
SCHEDULER_WORKER_POOL_SIZE=50
SCHEDULER_TASK_TIMEOUT=300s
SCHEDULER_RECONCILE_INTERVAL=10s

# Leader Election Configuration
LEADER_ELECTION_TIMEOUT=15s
LEADER_LEASE_DURATION=30s
LEADER_RENEW_DEADLINE=20s

# Agent Configuration
AGENT_HEARTBEAT_TIMEOUT=30s
AGENT_HEARTBEAT_INTERVAL=10s
AGENT_MAX_CONCURRENT_JOBS=10

# WebSocket Configuration
WEBSOCKET_MAX_CONNECTIONS=200
WEBSOCKET_PING_INTERVAL=30s
WEBSOCKET_PONG_TIMEOUT=60s
WEBSOCKET_WRITE_TIMEOUT=5s
WEBSOCKET_BROADCAST_BUFFER=16

# Monitoring Configuration
METRICS_PORT=9090
HEALTH_CHECK_PORT=8081
LOG_LEVEL=info
LOG_FORMAT=json

# Resource Limits
GOROUTINE_LIMIT=10000
MEMORY_LIMIT_BYTES=4294967296  # 4GB
CPU_LIMIT_CORES=2.0

# Timeouts
API_REQUEST_TIMEOUT=30s
JOB_EXECUTION_TIMEOUT=300s
STATE_RECONCILIATION_TIMEOUT=60s

# Rate Limiting
API_RATE_LIMIT=100  # requests per second
HEARTBEAT_RATE_LIMIT=10  # per agent per second

# Persistence
WAL_ARCHIVING_ENABLED=true
SNAPSHOT_INTERVAL=1h
BACKUP_RETENTION_DAYS=7

# Security
TLS_ENABLED=true
TLS_CERT_PATH=/etc/fluxforge/certs/tls.crt
TLS_KEY_PATH=/etc/fluxforge/certs/tls.key
RBAC_ENABLED=true

# Observability
PROMETHEUS_ENABLED=true
JAEGER_ENABLED=true
STRUCTURED_LOGGING=true
TRACE_SAMPLING_RATE=0.1

# Feature Flags
INCIDENT_CAPTURE_ENABLED=true
MULTI_CLUSTER_ENABLED=true
DASHBOARD_STREAMING_ENABLED=true
